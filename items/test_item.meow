-- Item metadata

-- The translation key of the item's name
display_name = identifier(wod.mod_id, "example_item_name")

-- The translation key of the item's description
description = identifier(wod.mod_id, "example_item_desc")

-- The string ID of the trigger condition
-- For a list of base game IDs see TODO
trigger_condition = "1andHalfSecond"

-- The string ID of the alternative trigger condition
alt_trigger_condition = "PassGoal"

-- The sprite that should be assigned to the item object
-- This sprite was registered in the sprites folder
sprite = get_mod_sprite("spr_spring_item")

-- 1 is used for normal items, 2 is used for upgraded items
level = 1

-- Unknown. TODO
type = 0

-- Item tiers
-- 0 - Common
-- 1 - Rare
-- 2 - Ultra Rare
tier = 0

-- Unknown. TODO
status = 0

-- effect_id is a string describing what the item does
-- It is only used for identification by other objects in code,
-- for example the The Eggy Perk, the perk that retriggers summoning items,
-- checks this variable so it knows what to retrigger.
-- For a list of base game effects see TODO

-- You can write anything here, and are welcome to 
-- add your effect ID to the database TODO
effect_id = "nubby_speed_changer"

-- for a list of item pools see TODO
pool = 1

-- price added to the item's base rarity price (can be negative)
offset_price = 0

-- Upgrade item ID
upgrade_item_id = identifier(wod.mod_id, "example_item_upgrade")

-- odds that affect the item's chance of appearing in early, mid, and endgame.
odds_weight_early = 5
odds_weight_mid = 5
odds_weight_end = 5


-- Event functions
-- In all event functions, self is the instance of the item running this code

-- Runs when the item is created
on_create = fun {
    
}

-- Runs when a round is initialized (before Nubby is launched)
on_round_init = fun {
    self.activated_this_round = false;
}

-- Runs every frame, for every item that exists right now
on_step = fun {
    -- Usually items don't use this event
    -- But you can do whatever you want

}

-- Runs when triggered
on_trigger = fun {
    if (self.DisableItem == false and global.GameMode == 1) {
        with (obj_ParNubby) {
            if (self.vspeed > 0) {
                self.vspeed = 0
            }
            self.vspeed -= 20
        }
        scr_FX_ItemFire(au_ItemFireGrl)
        scr_TrackFire()
        scr_PositionalEv()
    }
    scr_ItemQueue()
}

-- User defined
set_upgraded = fun {
    display_name = identifier(wod.mod_id, "example_item_upgrade_name")
    trigger_condition = "1Second"
    level = 2
    type = 1
    pool = 0
    sprite = get_mod_sprite("spr_spring_item_upgrade")

    upgrade_item_id = identifier(wod.mod_id "example_item")
}